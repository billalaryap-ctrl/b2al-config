<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>B2AL HWID & License Panel</title>

<style>
body{
  background:#000;
  color:#fff;
  font-family:monospace;
}
.card{
  background:#0f0f0f;
  padding:12px;
  margin:10px;
  border-radius:12px;
}
.btn{
  padding:6px 10px;
  border-radius:8px;
  border:0;
  margin-right:6px
}
.green{background:#00d46a}
.red{background:#ff4040}
.blue{background:#1d8bff}
.yellow{background:#ffaa00}
</style>
</head>

<body>

<h2>B2AL HWID & License Panel</h2>

<div id="status">Loading config...</div>
<div id="users"></div>

<script>

const repo = "billalaryap-ctrl/b2al-config";
const file = "config.json";

async function loadConfig(){

  const res = await fetch(
    `https://raw.githubusercontent.com/${repo}/main/${file}?t=`+Date.now()
  );

  if(!res.ok){
    document.getElementById("status").innerText =
      "Gagal load config.json";
    return;
  }

  const cfg = await res.json();
  window.CONFIG = cfg;

  render(cfg);
}

function render(cfg){

  document.getElementById("status").innerText =
    `Repo: ${repo}\nGlobal Expire: ${cfg.global_expire}`;

  const box = document.getElementById("users");
  box.innerHTML = "";

  if(!cfg.users || cfg.users.length === 0){
    box.innerHTML = "<p>Tidak ada user</p>";
    return;
  }

  cfg.users.forEach((u,i)=>{

    box.innerHTML += `
      <div class="card">

        <b>User:</b> ${u.user}<br>
        <b>Expire:</b> ${u.expire}<br>
        <b>HWID:</b> ${u.hwid || "(kosong / siap daftar)"}<br>
        <b>Status:</b> ${u.ban ? "BANNED" : "ACTIVE"}<br><br>

        <button class="btn green"
        onclick="resetHWID(${i})">Reset HWID</button>

        <button class="btn red"
        onclick="toggleBan(${i})">
          ${u.ban ? "Unban" : "Ban"}
        </button>

        <button class="btn blue"
        onclick="extend(${i})">Extend</button>

      </div>
    `;
  });
}

loadConfig();

</script>

</body>
</html>
